# frozen_string_literal: true

require 'ascii_cards'

RSpec.describe ASCIICards do
  subject(:ascii_cards) { described_class }

  describe '#stringify' do
    describe 'printing visible cards' do
      subject(:stringify) { ascii_cards.stringify(%i[ace spades]) }

      specify do
        expect(stringify).to eql(<<~ASCII.strip)
          ┌─────────┐
          │A        │
          │         │
          │         │
          │    ♠    │
          │         │
          │         │
          │        A│
          └─────────┘
        ASCII
      end
    end

    describe 'printing hidden cards' do
      subject(:stringify) { ascii_cards.stringify([10, :hearts, :hidden]) }

      specify do
        expect(stringify).to eql(<<~ASCII.strip)
          ┌─────────┐
          │░░░░░░░░░│
          │░░░░░░░░░│
          │░░░░░░░░░│
          │░░░░░░░░░│
          │░░░░░░░░░│
          │░░░░░░░░░│
          │░░░░░░░░░│
          └─────────┘
        ASCII
      end
    end

    describe 'printing multiple cards' do
      subject(:stringify) do
        ascii_cards.stringify(
          %i[jack hearts],
          [6, :diamonds],
          [7, :clubs, :hidden]
        )
      end

      specify do
        expect(stringify).to eql(<<~ASCII.strip)
          ┌─────────┐┌─────────┐┌─────────┐
          │J        ││6        ││░░░░░░░░░│
          │         ││         ││░░░░░░░░░│
          │         ││         ││░░░░░░░░░│
          │    ♥    ││    ♦    ││░░░░░░░░░│
          │         ││         ││░░░░░░░░░│
          │         ││         ││░░░░░░░░░│
          │        J││        6││░░░░░░░░░│
          └─────────┘└─────────┘└─────────┘
        ASCII
      end
    end

    describe 'printing every possible combination' do
      subject(:stringify) do
        [*2..10, :jack, :queen, :king, :ace].map do |rank|
          ascii_cards.stringify(
            [rank, :hearts],
            [rank, :spades],
            [rank, :clubs],
            [rank, :diamonds]
          )
        end.append(
          ascii_cards.stringify(
            [2, :hearts, :hidden],
            [2, :hearts, :hidden],
            [2, :hearts, :hidden],
            [2, :hearts, :hidden]
          )
        ).join("\n")
      end

      specify do
        expect(stringify).to eql(<<~ASCII.strip)
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │2        ││2        ││2        ││2        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        2││        2││        2││        2│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │3        ││3        ││3        ││3        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        3││        3││        3││        3│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │4        ││4        ││4        ││4        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        4││        4││        4││        4│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │5        ││5        ││5        ││5        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        5││        5││        5││        5│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │6        ││6        ││6        ││6        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        6││        6││        6││        6│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │7        ││7        ││7        ││7        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        7││        7││        7││        7│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │8        ││8        ││8        ││8        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        8││        8││        8││        8│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │9        ││9        ││9        ││9        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        9││        9││        9││        9│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │10       ││10       ││10       ││10       │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │       10││       10││       10││       10│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │J        ││J        ││J        ││J        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        J││        J││        J││        J│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │Q        ││Q        ││Q        ││Q        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        Q││        Q││        Q││        Q│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │K        ││K        ││K        ││K        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        K││        K││        K││        K│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │A        ││A        ││A        ││A        │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │    ♥    ││    ♠    ││    ♣    ││    ♦    │
          │         ││         ││         ││         │
          │         ││         ││         ││         │
          │        A││        A││        A││        A│
          └─────────┘└─────────┘└─────────┘└─────────┘
          ┌─────────┐┌─────────┐┌─────────┐┌─────────┐
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          │░░░░░░░░░││░░░░░░░░░││░░░░░░░░░││░░░░░░░░░│
          └─────────┘└─────────┘└─────────┘└─────────┘
        ASCII
      end
    end
  end
end
